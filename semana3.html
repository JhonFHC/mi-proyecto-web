<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Semana 3 - Aplicacion</title>
  <link rel="stylesheet" href="assets/style.css" />
</head>
<body>
  <nav class="navbar">
    <a href="index.html"><i class="fas fa-home"></i> Casa</a>
    <a href="tareas.html"><i class="fas fa-tasks"></i> Tareas por Semanas</a>
  </nav>

  <main class="container">
    <section class="frase-celebre">
      <blockquote>“La lógica te llevará del punto A al punto B. La imaginación te llevará a todas partes.” – Albert Einstein</blockquote>
    </section>

    <section>
        <!-- Parte 1: Documento informativo -->
        <div class="fila-dos-columnas">
          <div class="columna izquierda">
            <h3>Parte 1: Archivo Informativo</h3>
            <ul>
              <li><strong>Cómo crear un repositorio en GIT-HUB.docx</strong></li>
            </ul>
            <a href="/downloads/Cómo crear un repositorio en GIT-HUB.docx" class="btn" download>⬇️ Descargar Archivo</a>
          </div>
          <div class="columna derecha">
            <p>Este documento explica paso a paso cómo crear y configurar un repositorio en GitHub para tus proyectos.</p>
          </div>
        </div>
    </section>

    <section class="seccion-codigo cuadro-general">
      <h2>Semana 3</h2>

      <div class="fila-dos-columnas">
        <!-- Columna izquierda: Enunciado 1 -->
        <div class="columna izquierda">
          <h3>Enunciado 5</h3>
          <div class="enunciado-subsecciones">
            <div class="sub-cuadro">
              <h4>Java Main Class</h4>
              <pre><code>
                package com.zonajava.enunciado1;
                import Vista.CFormulario;
                public class Enunciado1 {
                    public static void main(String[] args) {
                        CFormulario ventana = new CFormulario();
                        ventana.setVisible(true);
                    }
                }
              </code></pre>
            </div>

            <div class="sub-cuadro">
              <h4>JFrame Form</h4>
              <pre><code>
package Vista;
import Clases.COfertaProducto;
import java.awt.Color;
import java.awt.Dimension;
import javax.swing.JOptionPane;

public class CFormulario extends javax.swing.JFrame {
    COfertaProducto oferta = new COfertaProducto();
    
    public CFormulario() {
        initComponents();
        formulario();
    }

    private void formulario() {
        setTitle("Oferta de Producto");
        setLocationRelativeTo(null);
        setResizable(false);
        setSize(new Dimension(400, 350));
        getContentPane().setBackground(Color.white);

        panelResultado.setVisible(false);
        btnCalcular.setEnabled(false);

        panelBotones.setVisible(true);
    }

    private void btnCalcularActionPerformed(java.awt.event.ActionEvent evt) {                                            
        // TODO add your handling code here:
        try {
            float precio = Float.parseFloat(txtPrecioDocena.getText().trim());
            int cantidad = Integer.parseInt(txtCantidadDocenas.getText().trim());

            oferta.setPrecioDocena(precio);
            oferta.setCantidadDocenas(cantidad);

            float importeCompra = oferta.calcularImporteCompra();
            float descuento = oferta.calcularDescuento();
            float importePagar = oferta.calcularImportePagar();
            int lapiceros = oferta.calcularLapiceros();

            String resultado = """
                    Importe de la compra: S/ %.2f
                    Descuento aplicado: S/ %.2f
                    Importe a pagar:     S/ %.2f
                    Lapiceros de obsequio: %d
                    """.formatted(importeCompra, descuento, importePagar, lapiceros);

            txtResultado.setText(resultado);
            panelResultado.setVisible(true);
            setSize(new Dimension(400, 420));
        } catch (NumberFormatException e) {
            JOptionPane.showMessageDialog(this, "Ingrese valores numéricos válidos.");
        }
    }                                           

    private void btnNuevoActionPerformed(java.awt.event.ActionEvent evt) {                                         
        // TODO add your handling code here:
        txtPrecioDocena.setText("");
        txtCantidadDocenas.setText("");
        txtResultado.setText("");
        panelResultado.setVisible(false);
        setSize(new Dimension(400, 350));
        btnCalcular.setEnabled(false);
    }                                        

    private void btnSaliActionPerformed(java.awt.event.ActionEvent evt) {                                        
        // TODO add your handling code here:
        int r = JOptionPane.showConfirmDialog(this, "¿Deseas salir?", "Salir", JOptionPane.YES_NO_OPTION);
        if (r == JOptionPane.YES_OPTION) {
            System.exit(0);
        }
    }                                       

    private void validarCampos() {
        String precio = txtPrecioDocena.getText().trim();
        String cantidad = txtCantidadDocenas.getText().trim();

        boolean habilitar = !precio.isEmpty() && !cantidad.isEmpty();

        // Verificamos que ambos campos sean numéricos válidos
        try {
            Float.parseFloat(precio);
            Integer.parseInt(cantidad);
        } catch (NumberFormatException e) {
            habilitar = false;
        }

        btnCalcular.setEnabled(habilitar);
    }

    private void txtPrecioDocenaKeyReleased(java.awt.event.KeyEvent evt) {                                            
        // TODO add your handling code here:
        validarCampos();  
    }                                           

    private void txtPrecioDocenaKeyTyped(java.awt.event.KeyEvent evt) {                                         
        // TODO add your handling code here:
        validarCampos();
    }                                        

    private void txtCantidadDocenasKeyPressed(java.awt.event.KeyEvent evt) {                                              
        // TODO add your handling code here:
        validarCampos();
    }                                             

    private void txtCantidadDocenasKeyReleased(java.awt.event.KeyEvent evt) {                                               
        // TODO add your handling code here:
        validarCampos();
    }
              </code></pre>

            <div class="sub-cuadro">
              <h4>Java Class</h4>
              <pre><code>
                package Clases;

public class COfertaProducto {
    private float precioDocena;
    private int cantidadDocenas;

    // Constructor vacío
    public COfertaProducto() {}

    // Setters
    public void setPrecioDocena(float precioDocena) {
        this.precioDocena = precioDocena;
    }

    public void setCantidadDocenas(int cantidadDocenas) {
        this.cantidadDocenas = cantidadDocenas;
    }

    // Cálculo del importe de compra
    public float calcularImporteCompra() {
        return precioDocena * cantidadDocenas;
    }

    // Cálculo del descuento
    public float calcularDescuento() {
        float importe = calcularImporteCompra();
        if (cantidadDocenas >= 10) {
            return importe * 0.20f;
        } else {
            return importe * 0.10f;
        }
    }

    // Cálculo del importe a pagar
    public float calcularImportePagar() {
        return calcularImporteCompra() - calcularDescuento();
    }

    // Cálculo de lapiceros obsequio
    public int calcularLapiceros() {
        float importePagar = calcularImportePagar();
        if (importePagar >= 200) {
            return cantidadDocenas * 2;
        } else {
            return 0;
        }
    }
}
              </code></pre>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="seccion-codigo cuadro-general">
      <h2>Semana 2</h2>

      <div class="fila-dos-columnas">
        <div class="columna izquierda">
          <h3>Enunciado 6</h3>

          <div class="enunciado-subsecciones">
            <div class="sub-cuadro">
              <h4>Java Main Class</h4>
              <pre><code>
                package com.zonajava.enunciado2;
import Vista.CFormulario;

public class Enunciado2 {

    public static void main(String[] args) {
        CFormulario venta = new CFormulario();
        venta.setVisible(true);
    }
}
              </code></pre>
            </div>

            <div class="sub-cuadro">
              <h4>JFrame Form</h4>
              <pre><code>
package Vista;
import Clase.COfertaTransporte;
import java.awt.Color;
import java.awt.Dimension;
import javax.swing.DefaultListCellRenderer;
import javax.swing.JOptionPane;

public class CFormulario extends javax.swing.JFrame {
    private final COfertaTransporte oferta = new COfertaTransporte();
    private DefaultListCellRenderer listRenderer;
    
    public CFormulario() {
        initComponents();
        formulario();
        inicializarElementos();
    }

    private void formulario() {
        setTitle("Oferta de Transportes");
        setLocationRelativeTo(null);
        setResizable(false);
        setSize(new Dimension(400, 350));
        getContentPane().setBackground(Color.white);

        panelResultado.setVisible(false);
        btnCalcular.setEnabled(false);
        panelBotones.setVisible(true);
    }
    
    private void validarCampos() {
        String turno = (String) comboTurno.getSelectedItem();
        String cantidadStr = txtCantidadPasajes.getText().trim();

        boolean habilitar = turno != null && !turno.isEmpty() && !cantidadStr.isEmpty();

        try {
            int cantidad = Integer.parseInt(cantidadStr);
            if (cantidad <= 0) {
                habilitar = false;
            }
        } catch (NumberFormatException e) {
            habilitar = false;
        }

        btnCalcular.setEnabled(habilitar);
    }

    
    private void inicializarElementos(){
    // Centrado del texto de cboCategoria
        listRenderer = new DefaultListCellRenderer();
        listRenderer.setHorizontalAlignment(DefaultListCellRenderer.CENTER);
        
        comboTurno.setRenderer(listRenderer);
        this.comboTurno.addItem("Seleccione");
        this.comboTurno.addItem("Mañana");
        this.comboTurno.addItem("Tarde");
        this.comboTurno.addItem("Noche");
        comboTurno.addItemListener(e -> validarCampos());
    }

    private void btnCalcularActionPerformed(java.awt.event.ActionEvent evt) {                                            
        // TODO add your handling code here:
        try {
            String turnoSeleccionado = (String) comboTurno.getSelectedItem();
            if (turnoSeleccionado == null || turnoSeleccionado.isEmpty()) {
                JOptionPane.showMessageDialog(this, "Seleccione un turno.");
                return;
            }

            int cantidad = Integer.parseInt(txtCantidadPasajes.getText().trim());
            if (cantidad <= 0) {
                JOptionPane.showMessageDialog(this, "Ingrese una cantidad válida mayor que cero.");
                return;
            }

            oferta.setTurno(turnoSeleccionado);
            oferta.setCantidadPasajes(cantidad);

            float importeCompra = oferta.calcularImporteCompra();
            float descuento = oferta.calcularDescuento();
            float importePagar = oferta.calcularImportePagar();
            int caramelos = oferta.calcularCaramelos();

            String resultado = String.format(
                "Importe de la compra: S/. %.2f\n" +
                "Descuento aplicado: S/. %.2f\n" +
                "Importe a pagar:     S/. %.2f\n" +
                "Caramelos de obsequio: %d\n",
                importeCompra, descuento, importePagar, caramelos);

            txtResultado.setText(resultado);
            panelResultado.setVisible(true);
            setSize(new Dimension(400, 420));
        } catch (NumberFormatException e) {
            JOptionPane.showMessageDialog(this, "Ingrese valores numéricos válidos.");
        }
    }                                           

    private void btnNuevoActionPerformed(java.awt.event.ActionEvent evt) {                                         
        // TODO add your handling code here:
        comboTurno.setSelectedIndex(0);
        txtCantidadPasajes.setText("");
        txtResultado.setText("");
        panelResultado.setVisible(false);
        setSize(new Dimension(400, 350));
        btnCalcular.setEnabled(false);
    }                                        

    private void btnSalirActionPerformed(java.awt.event.ActionEvent evt) {                                         
        // TODO add your handling code here:
        int r = JOptionPane.showConfirmDialog(this, "¿Deseas salir?", "Salir", JOptionPane.YES_NO_OPTION);
        if (r == JOptionPane.YES_OPTION) {
            System.exit(0);
        }
    }

    private void txtCantidadPasajesKeyReleased(java.awt.event.KeyEvent evt) {                                               
        // TODO add your handling code here:
        validarCampos();
    }                                              

    private void comboTurnoItemStateChanged(java.awt.event.ItemEvent evt) {                                            
        // TODO add your handling code here:
        validarCampos();
    }
              </code></pre>
            
            <div class="sub-cuadro">
              <h4>Java Class</h4>
              <pre><code>
                package Clase;

public class COfertaTransporte {
    private String turno; // "Mañana" o "Noche"
    private int cantidadPasajes;
    private final float precioPasaje = 37.5f;

    public void setTurno(String turno) {
        this.turno = turno;
    }

    public void setCantidadPasajes(int cantidadPasajes) {
        this.cantidadPasajes = cantidadPasajes;
    }

    public float calcularImporteCompra() {
        return precioPasaje * cantidadPasajes;
    }

    public float calcularDescuento() {
        float importe = calcularImporteCompra();
        float porcentajeDescuento = (cantidadPasajes >= 15) ? 0.08f : 0.05f;
        return importe * porcentajeDescuento;
    }

    public float calcularImportePagar() {
        return calcularImporteCompra() - calcularDescuento();
    }

    public int calcularCaramelos() {
        float importePagar = calcularImportePagar();
        if (importePagar > 200) {
            return 2 * cantidadPasajes;
        }
        return 0;
    }
}
            </pre></code>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>
</body>
</html>