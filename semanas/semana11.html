<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Semana 11 - Arquitectura MVC del Sistema</title>
  <link rel="stylesheet" href="../assets/style1.css" />
  <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
  <script defer src="../assets/interacciones.js"></script>
  <style>
    /* MISMOS ESTILOS DE SEMANA 1 */
    nav.navbar {
      background-color: #1e293b;
      padding: 10px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      position: fixed;
      top: 0; left: 0;
      width: 100%;
      z-index: 100;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
    }

    .navbar-left {
      display: flex;
      align-items: center;
      gap: 20px;
    }

    .navbar-right {
      display: flex;
      align-items: center;
      gap: 15px;
    }

    .logo-link {
      display: flex;
      align-items: center;
    }

    .logo {
      height: 40px;
      width: auto;
      filter: drop-shadow(0 0 3px #00ffc3);
      transition: filter 0.3s ease;
    }

    .logo-link:hover .logo {
      filter: drop-shadow(0 0 6px #00cfa3);
    }

    .nombre-desarrollador-nav {
      color: #00ffc3;
      font-weight: bold;
      font-size: 1.1rem;
      padding: 8px 16px;
      border-radius: 5px;
      background: rgba(0, 255, 195, 0.1);
      border: 1px solid #00ffc3;
    }

    .navbar a {
      color: #fff;
      text-decoration: none;
      font-weight: bold;
      padding: 8px 16px;
      border-radius: 5px;
      transition: background 0.3s ease, transform 0.2s ease;
      position: relative;
      overflow: hidden;
    }

    .navbar a:hover {
      background-color: #3b82f6;
      transform: scale(1.05);
    }

    .navbar a.clicked {
      background-color: #3b82f6;
    }

    /* Contenedor principal */
    .container {
      margin-top: 80px;
      padding: 20px;
      max-width: 1200px;
    }

    /* Encabezado */
    .encabezado-semana {
      text-align: center;
      margin-bottom: 40px;
      padding: 30px;
      background: rgba(30, 41, 59, 0.9);
      border-radius: 15px;
      box-shadow: 0 8px 25px rgba(0, 255, 195, 0.2);
      border: 1px solid #334155;
    }

    .encabezado-semana h1 {
      color: #00ffc3;
      font-size: 2.5rem;
      margin-bottom: 15px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 15px;
    }

    .encabezado-semana p {
      color: #cbd5e1;
      font-size: 1.2rem;
      max-width: 800px;
      margin: 0 auto;
      line-height: 1.6;
    }

    /* Grid de contenido */
    .grid-contenido {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
      gap: 30px;
      margin: 40px 0;
    }

    /* Tarjetas de temas - SIN ALTURA M√ÅXIMA FIJA */
    .tarjeta-tema {
      background: rgba(30, 41, 59, 0.9);
      border-radius: 15px;
      padding: 30px;
      box-shadow: 0 8px 25px rgba(0, 255, 195, 0.2);
      border: 1px solid #334155;
      transition: transform 0.3s ease;
      /* REMOVIMOS max-height y overflow */
    }

    .tarjeta-tema:hover {
      transform: translateY(-5px);
    }

    .tarjeta-tema h2 {
      color: #00ffc3;
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      gap: 12px;
      font-size: 1.8rem;
    }

    .tarjeta-tema p {
      color: #cbd5e1;
      line-height: 1.6;
      margin-bottom: 20px;
    }

    /* Acordeones mejorados */
    .acordeon {
      background: linear-gradient(135deg, #00ffc3, #00cfa3);
      color: #000;
      cursor: pointer;
      padding: 18px 20px;
      width: 100%;
      border: none;
      text-align: left;
      outline: none;
      font-size: 1.1rem;
      font-weight: bold;
      border-radius: 10px;
      margin: 15px 0;
      transition: all 0.3s ease;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .acordeon:hover {
      background: linear-gradient(135deg, #00cfa3, #00b393);
      transform: translateY(-2px);
    }

    .acordeon::after {
      content: "‚ñ∂";
      transition: transform 0.3s ease;
    }

    .acordeon.active::after {
      transform: rotate(90deg);
    }

    /* PANEL CON EXPANSI√ìN NATURAL - SIN SCROLL FIJO */
    .panel {
      background: rgba(255, 255, 255, 0.05);
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.4s ease;
      padding: 0 20px;
      border-radius: 0 0 10px 10px;
    }

    .panel.active {
      padding: 20px;
      /* QUITAMOS max-height fija y overflow-y */
      /* La altura se calcular√° autom√°ticamente con JS */
    }

    /* SCROLL SOLO PARA CONTENIDOS ESPEC√çFICOS */
    .panel-con-scroll {
      max-height: 400px;
      overflow-y: auto;
    }

    .panel-con-scroll::-webkit-scrollbar {
      width: 8px;
    }

    .panel-con-scroll::-webkit-scrollbar-track {
      background: rgba(30, 41, 59, 0.5);
      border-radius: 4px;
    }

    .panel-con-scroll::-webkit-scrollbar-thumb {
      background: #00ffc3;
      border-radius: 4px;
    }

    .panel-con-scroll::-webkit-scrollbar-thumb:hover {
      background: #00cfa3;
    }

    .panel ul {
      color: #cbd5e1;
      padding-left: 20px;
      margin: 15px 0;
    }

    .panel li {
      margin: 8px 0;
      line-height: 1.5;
    }

    /* C√≥digos resumidos */
    .codigo-resumido {
      background: #111;
      border-radius: 8px;
      padding: 20px;
      margin: 20px 0;
      border-left: 4px solid #00ffc3;
      overflow-x: auto; /* Scroll horizontal para c√≥digo */
    }

    .codigo-resumido pre {
      color: #0ff;
      margin: 0;
      font-size: 0.9rem;
      line-height: 1.4;
      min-width: max-content;
    }

    .codigo-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }

    .codigo-header h4 {
      color: #00ffc3;
      margin: 0;
    }

    /* Botones mejorados */
    .botones-accion {
      display: flex;
      gap: 15px;
      margin: 25px 0;
      flex-wrap: wrap;
    }

    .btn {
      display: inline-flex;
      align-items: center;
      gap: 10px;
      padding: 14px 26px;
      background: rgba(0, 255, 195, 0.15);
      color: #00ffc3;
      text-decoration: none;
      border-radius: 10px;
      border: 2px solid #00ffc3;
      transition: all 0.3s ease;
      font-weight: bold;
      font-size: 1rem;
      position: relative;
      overflow: hidden;
      box-shadow: 0 4px 15px rgba(0, 255, 195, 0.3);
    }

    .btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
      transition: left 0.5s;
    }

    .btn:hover::before {
      left: 100%;
    }

    .btn:hover {
      background: #00ffc3;
      color: #000;
      transform: translateY(-5px);
      box-shadow: 0 8px 25px rgba(0, 255, 195, 0.6);
    }

    .btn:active {
      transform: translateY(-2px);
    }

    .btn.solucion {
      background: rgba(147, 51, 234, 0.15);
      border-color: #9333ea;
      color: #9333ea;
      box-shadow: 0 4px 15px rgba(147, 51, 234, 0.3);
    }

    .btn.solucion:hover {
      background: #9333ea;
      color: #fff;
      box-shadow: 0 8px 25px rgba(147, 51, 234, 0.6);
    }

    .btn.regresar {
      background: rgba(107, 114, 128, 0.15);
      border-color: #6b7280;
      color: #6b7280;
      margin: 30px auto;
      display: flex;
      justify-content: center;
      max-width: 200px;
      box-shadow: 0 4px 15px rgba(107, 114, 128, 0.3);
    }

    .btn.regresar:hover {
      background: #6b7280;
      color: #fff;
      box-shadow: 0 8px 25px rgba(107, 114, 128, 0.6);
    }

    /* Grid de resumen */
    .resumen-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 25px;
      margin: 40px 0;
    }

    .tarjeta-resumen {
      background: rgba(30, 41, 59, 0.9);
      border-radius: 15px;
      padding: 25px;
      text-align: center;
      border: 1px solid #334155;
      transition: all 0.3s ease;
      box-shadow: 0 5px 20px rgba(0, 255, 195, 0.1);
    }

    .tarjeta-resumen:hover {
      transform: translateY(-5px);
      border-color: #00ffc3;
      box-shadow: 0 8px 25px rgba(0, 255, 195, 0.2);
    }

    .tarjeta-resumen .icono {
      font-size: 2.5rem;
      margin-bottom: 15px;
      color: #00ffc3;
    }

    .tarjeta-resumen h4 {
      color: #00ffc3;
      margin: 0 0 10px 0;
      font-size: 1.2rem;
    }

    .tarjeta-resumen p {
      color: #cbd5e1;
      margin: 0;
      line-height: 1.5;
    }

    /* Estructura de paquetes CON SCROLL */
    .estructura-paquetes {
      background: rgba(30, 41, 59, 0.8);
      border-radius: 10px;
      padding: 20px;
      margin: 20px 0;
      border-left: 4px solid #00ffc3;
      max-height: 400px;
      overflow-y: auto;
    }

    .estructura-paquetes h4 {
      color: #00ffc3;
      margin-bottom: 15px;
    }

    .estructura-paquetes pre {
      color: #cbd5e1;
      margin: 0;
      font-family: 'Courier New', monospace;
      font-size: 0.9rem;
      line-height: 1.4;
    }

    /* Scrollbar personalizado para estructura de paquetes */
    .estructura-paquetes::-webkit-scrollbar {
      width: 8px;
    }

    .estructura-paquetes::-webkit-scrollbar-track {
      background: rgba(30, 41, 59, 0.5);
      border-radius: 4px;
    }

    .estructura-paquetes::-webkit-scrollbar-thumb {
      background: #00ffc3;
      border-radius: 4px;
    }

    .estructura-paquetes::-webkit-scrollbar-thumb:hover {
      background: #00cfa3;
    }

    /* Responsive */
    @media (max-width: 768px) {
      .grid-contenido {
        grid-template-columns: 1fr;
      }
      
      .resumen-grid {
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      }
      
      .botones-accion {
        flex-direction: column;
      }
      
      .btn {
        justify-content: center;
      }
      
      .estructura-paquetes {
        max-height: 300px;
      }
    }

    @media (max-width: 480px) {
      .tarjeta-tema {
        padding: 20px;
      }
      
      .panel.active {
        padding: 15px;
      }
      
      .acordeon {
        padding: 15px;
        font-size: 1rem;
      }
      
      .estructura-paquetes {
        max-height: 250px;
      }
    }
  </style>
</head>
<body>
  <nav class="navbar">
    <div class="navbar-left">
      <a href="../interfaz.html" class="logo-link" aria-label="Inicio">
        <img src="../IMG/UPLA.png" alt="Logo Universidad" class="logo" />
      </a>
      <div class="nombre-desarrollador-nav">
        <i class="fas fa-user"></i> Jhon Huaman Cardenas
      </div>
    </div>

    <div class="navbar-right">
      <a href="../interfaz.html"><i class="fas fa-home"></i> Inicio</a>
      <a href="../sobre-mi.html"><i class="fas fa-user"></i> Sobre m√≠</a>
      <a href="../tareas.html" class="clicked"><i class="fas fa-tasks"></i> Tareas</a>
    </div>
  </nav>

  <canvas id="particles"></canvas>

  <main class="container">
    <!-- Encabezado -->
    <section class="encabezado-semana fade-in">
      <h1><i class="fas fa-sitemap"></i> Semana 11 - Arquitectura MVC del Sistema</h1>
      <p>Implementaci√≥n completa del patr√≥n Modelo-Vista-Controlador en el Sistema de Evaluaci√≥n de Tesis con Java Servlets y JSP.</p>
    </section>

    <!-- Grid de resumen -->
    <div class="resumen-grid fade-in">
      <div class="tarjeta-resumen">
        <div class="icono">üéØ</div>
        <h4>Controladores</h4>
        <p>3 Servlets principales que gestionan la l√≥gica de negocio</p>
      </div>
      <div class="tarjeta-resumen">
        <div class="icono">üìä</div>
        <h4>Modelos</h4>
        <p>Entidades principales: Usuario, Tesis, Evaluaci√≥n</p>
      </div>
      <div class="tarjeta-resumen">
        <div class="icono">üóÉÔ∏è</div>
        <h4>DAO</h4>
        <p>4 clases de acceso a datos con operaciones CRUD</p>
      </div>
      <div class="tarjeta-resumen">
        <div class="icono">üåê</div>
        <h4>Vistas</h4>
        <p>Interfaces JSP organizadas por roles de usuario</p>
      </div>
    </div>

    <!-- Grid de contenido -->
    <div class="grid-contenido">
      <!-- Tarjeta Estructura General -->
      <section class="tarjeta-tema fade-in">
        <h2><i class="fas fa-folder-tree"></i> Estructura del Proyecto MVC</h2>
        <p>Organizaci√≥n completa del sistema en paquetes seg√∫n el patr√≥n Modelo-Vista-Controlador.</p>

        <button class="acordeon">
          <i class="fas fa-layer-group"></i> Estructura de Paquetes y Arquitectura
        </button>
        <div class="panel">
          <div class="estructura-paquetes">
            <h4><i class="fas fa-folder"></i> Estructura de Directorios</h4>
            <pre><code>src/
‚îú‚îÄ‚îÄ main/
‚îÇ   ‚îú‚îÄ‚îÄ java/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ com/zonajava/sistemaevaluaciontesis/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ controller/          # Controladores (Servlets)
‚îÇ   ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ LoginServlet.java
‚îÇ   ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ TesisServlet.java
‚îÇ   ‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ UsuarioServlet.java
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ dao/                 # Data Access Objects
‚îÇ   ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ DatabaseConnection.java
‚îÇ   ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ EvaluacionDAO.java
‚îÇ   ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ TesisDAO.java
‚îÇ   ‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ UsuarioDAO.java
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ model/               # Modelos (Entidades)
‚îÇ   ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ Usuario.java
‚îÇ   ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ Tesis.java
‚îÇ   ‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ Evaluacion.java
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ filter/              # Filtros de seguridad
‚îÇ   ‚îÇ           ‚îî‚îÄ‚îÄ AuthenticationFilter.java
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ webapp/
‚îÇ       ‚îú‚îÄ‚îÄ WEB-INF/
‚îÇ       ‚îú‚îÄ‚îÄ vistas/                  # Vistas principales
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ login.jsp
‚îÇ       ‚îú‚îÄ‚îÄ admin/                   # Vistas de administrador
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ dashboard.jsp
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ usuarios.jsp
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ tesis.jsp
‚îÇ       ‚îú‚îÄ‚îÄ estudiante/              # Vistas de estudiante
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ dashboard.jsp
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ tesis.jsp
‚îÇ       ‚îú‚îÄ‚îÄ asesor/                  # Vistas de asesor
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ dashboard.jsp
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ tesis.jsp
‚îÇ       ‚îî‚îÄ‚îÄ jurado/                  # Vistas de jurado
‚îÇ           ‚îú‚îÄ‚îÄ dashboard.jsp
‚îÇ           ‚îî‚îÄ‚îÄ evaluaciones.jsp
‚îî‚îÄ‚îÄ resources/
    ‚îî‚îÄ‚îÄ database.properties</code></pre>
          </div>

          <h4><i class="fas fa-random"></i> Flujo MVC del Sistema</h4>
          <ul>
            <li><strong>Petici√≥n HTTP ‚Üí Servlet (Controller)</strong> - Recibe y procesa la solicitud</li>
            <li><strong>Servlet ‚Üí DAO (Model)</strong> - Accede a los datos mediante DAO</li>
            <li><strong>DAO ‚Üí Base de Datos</strong> - Ejecuta operaciones CRUD</li>
            <li><strong>DAO ‚Üí Servlet</strong> - Retorna datos procesados</li>
            <li><strong>Servlet ‚Üí JSP (View)</strong> - Env√≠a datos a la vista</li>
            <li><strong>JSP ‚Üí Respuesta HTML</strong> - Renderiza la interfaz al usuario</li>
          </ul>
        </div>
      </section>

      <!-- Tarjeta Controladores -->
      <section class="tarjeta-tema fade-in">
        <h2><i class="fas fa-cogs"></i> Capa de Controladores</h2>
        <p>Servlets que gestionan la l√≥gica de negocio, procesan peticiones y coordinan entre modelos y vistas.</p>

        <button class="acordeon">
          <i class="fas fa-sign-in-alt"></i> LoginServlet - Control de Autenticaci√≥n
        </button>
        <div class="panel">
          <h4>Funcionalidades Principales</h4>
          <ul>
            <li><strong>Autenticaci√≥n de usuarios:</strong> Valida credenciales contra la base de datos</li>
            <li><strong>Gesti√≥n de sesiones:</strong> Crea y mantiene sesiones de usuario</li>
            <li><strong>Redirecci√≥n por roles:</strong> Dirige a dashboards espec√≠ficos seg√∫n el rol</li>
            <li><strong>Logout seguro:</strong> Invalida sesiones al cerrar sesi√≥n</li>
          </ul>

          <div class="codigo-resumido">
            <div class="codigo-header">
              <h4><i class="fas fa-code"></i> LoginServlet.java - M√©todo doPost</h4>
            </div>
            <pre><code>@Override
protected void doPost(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    
    String email = request.getParameter("email");
    String password = request.getParameter("password");
    
    Usuario usuario = usuarioDAO.autenticar(email, password);
    
    if (usuario != null) {
        HttpSession session = request.getSession();
        session.setAttribute("usuario", usuario);
        
        // Redirigir seg√∫n el rol
        switch (usuario.getRol()) {
            case "admin":
                response.sendRedirect("admin/dashboard.jsp");
                break;
            case "estudiante":
                response.sendRedirect("estudiante/dashboard.jsp");
                break;
            case "asesor":
                response.sendRedirect("asesor/dashboard.jsp");
                break;
            case "jurado":
                response.sendRedirect("jurado/dashboard.jsp");
                break;
            default:
                response.sendRedirect("vistas/login.jsp?error=rol_no_valido");
        }
    } else {
        response.sendRedirect("vistas/login.jsp?error=credenciales_invalidas");
    }
}</code></pre>
          </div>
        </div>

        <button class="acordeon">
          <i class="fas fa-file-alt"></i> TesisServlet - Gesti√≥n de Tesis
        </button>
        <div class="panel">
          <h4>Operaciones CRUD de Tesis</h4>
          <ul>
            <li><strong>Crear tesis:</strong> Permite a estudiantes crear nuevas tesis</li>
            <li><strong>Actualizar tesis:</strong> Modificaci√≥n de tesis existentes</li>
            <li><strong>Enviar tesis:</strong> Cambio de estado a "enviada" para evaluaci√≥n</li>
            <li><strong>Asignar jurados:</strong> Asignaci√≥n de evaluadores a tesis</li>
            <li><strong>B√∫squeda:</strong> Filtrado y b√∫squeda de tesis</li>
          </ul>

          <div class="codigo-resumido">
            <div class="codigo-header">
              <h4><i class="fas fa-code"></i> TesisServlet.java - Crear Tesis</h4>
            </div>
            <pre><code>private void crearTesis(HttpServletRequest request, HttpServletResponse response, Usuario usuario)
        throws ServletException, IOException {
    
    try {
        Tesis tesis = new Tesis();
        tesis.setTitulo(request.getParameter("titulo"));
        tesis.setDescripcion(request.getParameter("descripcion"));
        tesis.setIdEstudiante(usuario.getIdUsuario());
        tesis.setIdAsesor(Integer.parseInt(request.getParameter("idAsesor")));
        tesis.setArchivoUrl(request.getParameter("archivoUrl"));
        tesis.setEstado("borrador");
        
        if (tesisDAO.crearTesis(tesis)) {
            response.sendRedirect("estudiante/tesis.jsp?success=tesis_creada");
        } else {
            response.sendRedirect("estudiante/tesis.jsp?error=creacion_fallida");
        }
    } catch (Exception e) {
        e.printStackTrace();
        response.sendRedirect("estudiante/tesis.jsp?error=creacion_fallida");
    }
}</code></pre>
          </div>
        </div>

        <button class="acordeon">
          <i class="fas fa-users"></i> UsuarioServlet - Administraci√≥n de Usuarios
        </button>
        <div class="panel">
          <h4>Gesti√≥n Completa de Usuarios</h4>
          <ul>
            <li><strong>CRUD completo:</strong> Crear, leer, actualizar y eliminar usuarios</li>
            <li><strong>B√∫squeda avanzada:</strong> Filtrado por nombre, email o departamento</li>
            <li><strong>Control de acceso:</strong> Solo administradores pueden gestionar usuarios</li>
            <li><strong>Validaciones:</strong> Verificaci√≥n de permisos y datos</li>
          </ul>

          <div class="codigo-resumido">
            <div class="codigo-header">
              <h4><i class="fas fa-code"></i> UsuarioServlet.java - Crear Usuario</h4>
            </div>
            <pre><code>private void crearUsuario(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    
    Usuario usuario = new Usuario();
    usuario.setNombreCompleto(request.getParameter("nombreCompleto"));
    usuario.setEmail(request.getParameter("email"));
    usuario.setPassword(request.getParameter("password"));
    usuario.setRol(request.getParameter("rol"));
    usuario.setDepartamento(request.getParameter("departamento"));
    
    if (usuarioDAO.crearUsuario(usuario)) {
        response.sendRedirect("usuarios?success=usuario_creado");
    } else {
        response.sendRedirect("usuarios?error=creacion_fallida");
    }
}</code></pre>
          </div>
        </div>
      </section>

      <!-- Tarjeta Modelos y DAO -->
      <section class="tarjeta-tema fade-in">
        <h2><i class="fas fa-database"></i> Capa de Modelos y Acceso a Datos</h2>
        <p>Entidades del dominio y clases DAO que manejan la persistencia de datos en MySQL.</p>

        <button class="acordeon">
          <i class="fas fa-table"></i> DatabaseConnection - Conexi√≥n a BD
        </button>
        <div class="panel">
          <h4>Gesti√≥n Centralizada de Conexiones</h4>
          <ul>
            <li><strong>Pool de conexiones:</strong> Reutilizaci√≥n eficiente de conexiones</li>
            <li><strong>Configuraci√≥n centralizada:</strong> Par√°metros en un solo lugar</li>
            <li><strong>Manejo de errores:</strong> Excepciones controladas apropiadamente</li>
            <li><strong>Driver MySQL:</strong> Compatible con MySQL Connector/J</li>
          </ul>

          <div class="codigo-resumido">
            <div class="codigo-header">
              <h4><i class="fas fa-code"></i> DatabaseConnection.java</h4>
            </div>
            <pre><code>public class DatabaseConnection {
    private static final String URL = "jdbc:mysql://127.0.0.1:3306/sistema_evaluacion_tesis";
    private static final String USER = "gestion";
    private static final String PASSWORD = "admin123";
    
    public static Connection getConnection() throws SQLException {
        try {
            Class.forName("com.mysql.cj.jdbc.Driver");
            return DriverManager.getConnection(URL, USER, PASSWORD);
        } catch (ClassNotFoundException e) {
            throw new SQLException("Driver MySQL no encontrado", e);
        }
    }
}</code></pre>
          </div>
        </div>

        <button class="acordeon">
          <i class="fas fa-user-friends"></i> UsuarioDAO - Operaciones de Usuario
        </button>
        <div class="panel">
          <h4>Funcionalidades de UsuarioDAO</h4>
          <ul>
            <li><strong>Autenticaci√≥n:</strong> Verificaci√≥n de credenciales</li>
            <li><strong>CRUD completo:</strong> Todas las operaciones b√°sicas</li>
            <li><strong>B√∫squedas:</strong> Por criterios m√∫ltiples</li>
            <li><strong>Filtrado por rol:</strong> Obtenci√≥n de usuarios por tipo</li>
          </ul>

          <div class="codigo-resumido">
            <div class="codigo-header">
              <h4><i class="fas fa-code"></i> UsuarioDAO.java - Autenticaci√≥n</h4>
            </div>
            <pre><code>public Usuario autenticar(String email, String password) {
    Usuario usuario = null;
    String sql = "SELECT * FROM usuarios WHERE email = ? AND password = ? AND estado = 'activo'";
    
    try (Connection conn = DatabaseConnection.getConnection();
         PreparedStatement stmt = conn.prepareStatement(sql)) {
        
        stmt.setString(1, email);
        stmt.setString(2, password);
        
        ResultSet rs = stmt.executeQuery();
        if (rs.next()) {
            usuario = new Usuario();
            usuario.setIdUsuario(rs.getInt("id_usuario"));
            usuario.setNombreCompleto(rs.getString("nombre_completo"));
            usuario.setEmail(rs.getString("email"));
            usuario.setPassword(rs.getString("password"));
            usuario.setRol(rs.getString("rol"));
            usuario.setDepartamento(rs.getString("departamento"));
            usuario.setEstado(rs.getString("estado"));
            usuario.setFechaCreacion(rs.getTimestamp("fecha_creacion"));
        }
    } catch (SQLException e) {
        e.printStackTrace();
    }
    return usuario;
}</code></pre>
          </div>
        </div>

        <button class="acordeon">
          <i class="fas fa-graduation-cap"></i> TesisDAO - Gesti√≥n de Tesis
        </button>
        <div class="panel">
          <h4>Operaciones Avanzadas de Tesis</h4>
          <ul>
            <li><strong>Gesti√≥n completa:</strong> CRUD de tesis con relaciones</li>
            <li><strong>B√∫squedas complejas:</strong> Con joins a tablas relacionadas</li>
            <li><strong>Asignaci√≥n de jurados:</strong> Gesti√≥n de evaluadores</li>
            <li><strong>Estados:</strong> Control de flujo de estados de tesis</li>
          </ul>

          <div class="codigo-resumido">
            <div class="codigo-header">
              <h4><i class="fas fa-code"></i> TesisDAO.java - Obtener Todas las Tesis</h4>
            </div>
            <pre><code>public List<Tesis> obtenerTodasTesis() {
    List<Tesis> tesisList = new ArrayList<>();
    String sql = "SELECT t.*, ue.nombre_completo as nombre_estudiante, ua.nombre_completo as nombre_asesor " +
                "FROM tesis t " +
                "LEFT JOIN usuarios ue ON t.id_estudiante = ue.id_usuario " +
                "LEFT JOIN usuarios ua ON t.id_asesor = ua.id_usuario " +
                "ORDER BY t.fecha_creacion DESC";
    
    try (Connection conn = DatabaseConnection.getConnection();
         PreparedStatement stmt = conn.prepareStatement(sql);
         ResultSet rs = stmt.executeQuery()) {
        
        while (rs.next()) {
            Tesis tesis = new Tesis();
            tesis.setIdTesis(rs.getInt("id_tesis"));
            tesis.setTitulo(rs.getString("titulo"));
            tesis.setDescripcion(rs.getString("descripcion"));
            tesis.setIdEstudiante(rs.getInt("id_estudiante"));
            tesis.setIdAsesor(rs.getInt("id_asesor"));
            tesis.setEstado(rs.getString("estado"));
            tesis.setArchivoUrl(rs.getString("archivo_url"));
            tesis.setFechaEnvio(rs.getTimestamp("fecha_envio"));
            tesis.setFechaCreacion(rs.getTimestamp("fecha_creacion"));
            tesis.setNombreEstudiante(rs.getString("nombre_estudiante"));
            tesis.setNombreAsesor(rs.getString("nombre_asesor"));
            tesisList.add(tesis);
        }
    } catch (SQLException e) {
        e.printStackTrace();
    }
    return tesisList;
}</code></pre>
          </div>
        </div>

        <button class="acordeon">
          <i class="fas fa-star"></i> EvaluacionDAO - Sistema de Evaluaciones
        </button>
        <div class="panel">
          <h4>Gesti√≥n de Procesos de Evaluaci√≥n</h4>
          <ul>
            <li><strong>Crear evaluaciones:</strong> Asignar tesis a jurados</li>
            <li><strong>Consultas por rol:</strong> Evaluaciones por jurado o tesis</li>
            <li><strong>Actualizaciones:</strong> Calificaciones y comentarios</li>
            <li><strong>Estad√≠sticas:</strong> M√©tricas para dashboards</li>
          </ul>

          <div class="codigo-resumido">
            <div class="codigo-header">
              <h4><i class="fas fa-code"></i> EvaluacionDAO.java - M√©tricas</h4>
            </div>
            <pre><code>public int obtenerTotalEvaluacionesPendientes(int idJurado) {
    String sql = "SELECT COUNT(*) as total FROM evaluaciones WHERE id_jurado = ? AND estado = 'pendiente'";
    
    try (Connection conn = DatabaseConnection.getConnection();
         PreparedStatement stmt = conn.prepareStatement(sql)) {
        
        stmt.setInt(1, idJurado);
        ResultSet rs = stmt.executeQuery();
        
        if (rs.next()) {
            return rs.getInt("total");
        }
    } catch (SQLException e) {
        e.printStackTrace();
    }
    return 0;
}</code></pre>
          </div>
        </div>
      </section>
    </div>

    <!-- Caracter√≠sticas T√©cnicas -->
    <section class="tarjeta-tema fade-in">
      <h2><i class="fas fa-microchip"></i> Caracter√≠sticas T√©cnicas del MVC</h2>
      <p>Principios de dise√±o y mejores pr√°cticas implementadas en la arquitectura.</p>

      <button class="acordeon">
        <i class="fas fa-shield-alt"></i> Seguridad y Control de Acceso
      </button>
      <div class="panel">
        <h4>Medidas de Seguridad Implementadas</h4>
        <ul>
          <li><strong>Autenticaci√≥n por sesiones:</strong> HttpSession para mantener estado</li>
          <li><strong>Control de roles:</strong> Verificaci√≥n de permisos en cada servlet</li>
          <li><strong>Prepared Statements:</strong> Prevenci√≥n de SQL Injection</li>
          <li><strong>Validaci√≥n de datos:</strong> Sanitizaci√≥n de entradas del usuario</li>
          <li><strong>Logout seguro:</strong> Invalida sesiones correctamente</li>
        </ul>
      </div>

      <button class="acordeon">
        <i class="fas fa-tachometer-alt"></i> Performance y Optimizaci√≥n
      </button>
      <div class="panel">
        <h4>Optimizaciones Implementadas</h4>
        <ul>
          <li><strong>Pool de conexiones:</strong> Reutilizaci√≥n eficiente de conexiones BD</li>
          <li><strong>Prepared Statements:</strong> Reutilizaci√≥n de consultas SQL</li>
          <li><strong>Lazy loading:</strong> Carga bajo demanda de datos relacionados</li>
          <li><strong>Cache de consultas:</strong> Resultados frecuentes en memoria</li>
          <li><strong>Redirecciones eficientes:</strong> Minimiza round-trips al servidor</li>
        </ul>
      </div>

      <button class="acordeon">
        <i class="fas fa-bug"></i> Manejo de Errores y Excepciones
      </button>
      <div class="panel">
        <h4>Sistema Robusto de Manejo de Errores</h4>
        <ul>
          <li><strong>Try-with-resources:</strong> Liberaci√≥n autom√°tica de recursos</li>
          <li><strong>Logging consistente:</strong> Registro de excepciones para debugging</li>
          <li><strong>Mensajes de error amigables:</strong> Feedback claro al usuario</li>
          <li><strong>Validaciones m√∫ltiples:</strong> En frontend y backend</li>
          <li><strong>Rollback autom√°tico:</strong> En operaciones transaccionales</li>
        </ul>
      </div>
    </section>

    <!-- Botones de acci√≥n -->
    <div class="botones-accion">
      <a href="https://github.com/JhonFHC/mi-proyecto-web/tree/main/semanas/Semana11" class="btn solucion" target="_blank">
        <i class="fab fa-github"></i> Ver C√≥digo Completo en GitHub
      </a>
    </div>

    <!-- Bot√≥n de regresar -->
    <a href="../tareas.html" class="btn regresar">
      <i class="fas fa-arrow-left"></i> Volver a Tareas
    </a>
  </main>

  <script>
    // Funcionalidad de acordeones MEJORADA
    document.addEventListener('DOMContentLoaded', function() {
      const acordeones = document.querySelectorAll('.acordeon');

      acordeones.forEach((btn) => {
        btn.addEventListener('click', function () {
          this.classList.toggle('active');
          const panel = this.nextElementSibling;
          
          if (panel.classList.contains('active')) {
            // Cerrar panel
            panel.style.maxHeight = null;
            panel.classList.remove('active');
          } else {
            // Abrir panel - calcular altura autom√°ticamente
            panel.style.maxHeight = panel.scrollHeight + 'px';
            panel.classList.add('active');
            
            // Scroll suave hacia el acorde√≥n si est√° cerca del borde inferior
            const rect = btn.getBoundingClientRect();
            if (rect.bottom > window.innerHeight - 100) {
              btn.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
          }
        });
      });
    });
  </script>
</body>
</html>