<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Semana 7 - Base de Datos del Sistema</title>
  <link rel="stylesheet" href="../assets/style1.css" />
  <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
  <script defer src="../assets/interacciones.js"></script>
  <style>
    /* Estilos para navbar y logo (mismo formato que en las otras p√°ginas) */
    nav.navbar {
      background-color: #1e293b;
      padding: 10px;
      display: flex;
      gap: 20px;
      justify-content: center;
      align-items: center;
      position: fixed;
      top: 0; left: 0;
      width: 100%;
      z-index: 100;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
    }
    .logo-link {
      display: flex;
      align-items: center;
      margin-right: 20px;
    }
    .logo {
      height: 40px;
      width: auto;
      filter: drop-shadow(0 0 3px #00ffc3);
      transition: filter 0.3s ease;
    }
    .logo-link:hover .logo {
      filter: drop-shadow(0 0 6px #00cfa3);
    }
    .navbar a {
      color: #fff;
      text-decoration: none;
      font-weight: bold;
      padding: 8px 16px;
      border-radius: 5px;
      transition: background 0.3s ease, transform 0.2s ease;
      position: relative;
      overflow: hidden;
    }
    .navbar a:hover {
      background-color: #3b82f6;
      transform: scale(1.05);
    }
    .navbar a.clicked {
      background-color: #3b82f6;
    }
    /* Acorde√≥n (estilos originales intactos) */
    .acordeon {
      background-color: #00ffc3;
      color: #000;
      cursor: pointer;
      padding: 14px;
      width: 100%;
      border: none;
      text-align: left;
      outline: none;
      font-size: 1.1rem;
      border-radius: 5px;
      margin-bottom: 10px;
      transition: background-color 0.3s;
    }
    .acordeon:hover {
      background-color: #00cfa3;
    }
    .panel {
      background-color: rgba(255, 255, 255, 0.1);
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.4s ease;
      padding: 0 18px;
      border-left: 3px solid #00ffc3;
      color: #ccc;
      margin-bottom: 20px;
      border-radius: 0 0 5px 5px;
    }
    pre {
      background: #111;
      color: #0ff;
      padding: 10px;
      overflow-x: auto;
      border-radius: 5px;
      font-size: 0.9rem;
    }
    .btn {
      background-color: #00ffc3;
      color: #000;
      padding: 10px 20px;
      border: none;
      border-radius: 20px;
      cursor: pointer;
      font-weight: bold;
      margin-top: 10px;
      transition: background-color 0.3s ease;
      display: inline-block;
      text-decoration: none;
    }
    .btn:hover {
      background-color: #00cfa3;
    }
    /* Estilo para el bot√≥n de regresar (extiende .btn) */
    .btn-regresar {
      margin: 20px auto;
      display: block;
      text-align: center;
      max-width: 200px;
    }
    /* Ajuste para main (compensa navbar fija) */
    .container {
      margin-top: 80px;
    }
    /* Estilos para caracter√≠sticas de la base de datos */
    .caracteristicas {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      margin: 20px 0;
    }
    .caracteristica {
      background: rgba(255, 255, 255, 0.05);
      padding: 15px;
      border-radius: 8px;
      border-left: 4px solid #00ffc3;
    }
    .caracteristica h4 {
      color: #00ffc3;
      margin-top: 0;
    }
    .tabla-info {
      background: rgba(255, 255, 255, 0.05);
      padding: 15px;
      border-radius: 8px;
      margin: 10px 0;
    }
    .tabla-info h5 {
      color: #00ffc3;
      margin-top: 0;
    }
  </style>
</head>
<body>
  <nav class="navbar">
    <a href="../interfaz.html" class="logo-link" aria-label="Inicio">
      <img src="../IMG/UPLA.png" alt="Logo Universidad" class="logo" />
    </a>
    <a href="../interfaz.html"><i class="fas fa-home"></i> Inicio</a>
    <a href="../sobre-mi.html"><i class="fas fa-user"></i> Sobre m√≠</a>
    <a href="../tareas.html" class="clicked"><i class="fas fa-tasks"></i> Tareas por Semanas</a>
  </nav>
  <canvas id="particles"></canvas>

  <main class="container">

    <section class="frase-celebre fade-in">
      <blockquote>"Los datos son el nuevo oro. Una base de datos bien dise√±ada es la mina que lo extrae." ‚Äì An√≥nimo</blockquote>
    </section>

    <section class="fade-in">
      <h2>Semana 7 - Base de Datos del Sistema Acad√©mico</h2>
      <p>Dise√±o e implementaci√≥n de una base de datos MySQL para gestionar usuarios, cursos, inscripciones y calificaciones en un sistema acad√©mico de ense√±anza de idiomas.</p>
    </section>

    <div class="caracteristicas">
      <div class="caracteristica">
        <h4>üèóÔ∏è Estructura de la Base de Datos</h4>
        <ul>
          <li>4 tablas principales</li>
          <li>Relaciones bien definidas</li>
          <li>Claves for√°neas y restricciones</li>
          <li>√çndices para optimizaci√≥n</li>
        </ul>
      </div>
      <div class="caracteristica">
        <h4>üë• Gesti√≥n de Usuarios</h4>
        <ul>
          <li>3 roles: admin, profesor, estudiante</li>
          <li>Autenticaci√≥n segura</li>
          <li>Datos personales completos</li>
          <li>Control de estado activo/inactivo</li>
        </ul>
      </div>
      <div class="caracteristica">
        <h4>üìä Funcionalidades Acad√©micas</h4>
        <ul>
          <li>Gesti√≥n de cursos por niveles</li>
          <li>Sistema de calificaciones detallado</li>
          <li>Inscripciones y seguimiento</li>
          <li>Reportes y consultas avanzadas</li>
        </ul>
      </div>
    </div>

    <button class="acordeon">Script Completo de la Base de Datos</button>
    <div class="panel">
      <h3>Estructura Completa del Sistema</h3>
      <p>Script SQL para crear la base de datos, tablas, relaciones y datos de ejemplo:</p>
      
      <pre><code>
-- =============================================
-- SISTEMA DE GESTI√ìN ACAD√âMICA - BASE DE DATOS
-- =============================================

-- Crear base de datos y seleccionarla
DROP DATABASE IF EXISTS sistema_gestion_academica;
CREATE DATABASE sistema_gestion_academica;
USE sistema_gestion_academica;

-- =============================================
-- TABLA: Usuarios
-- =============================================
CREATE TABLE Usuarios (
    id INT AUTO_INCREMENT PRIMARY KEY,
    ingresoUsuario VARCHAR(50) UNIQUE NOT NULL,
    ingresoContrasenia VARCHAR(100) NOT NULL,
    rol ENUM('admin', 'profesor', 'estudiante') NOT NULL DEFAULT 'estudiante',
    nombre VARCHAR(100) NOT NULL,
    email VARCHAR(100) UNIQUE NOT NULL,
    telefono VARCHAR(15),
    fecha_nacimiento DATE,
    fecha_registro TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    activo BOOLEAN DEFAULT TRUE
);

-- =============================================
-- TABLA: Cursos
-- =============================================
CREATE TABLE Cursos (
    id INT AUTO_INCREMENT PRIMARY KEY,
    nombre_curso VARCHAR(100) NOT NULL,
    nivel ENUM('A1', 'A2', 'B1', 'B2', 'C1', 'C2') NOT NULL,
    descripcion TEXT,
    profesor_id INT NOT NULL,
    max_estudiantes INT DEFAULT 20,
    fecha_inicio DATE,
    fecha_fin DATE,
    activo BOOLEAN DEFAULT TRUE,
    fecha_creacion TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (profesor_id) REFERENCES Usuarios(id)
);

-- =============================================
-- TABLA: Calificaciones
-- =============================================
CREATE TABLE Calificaciones (
    id INT AUTO_INCREMENT PRIMARY KEY,
    estudiante_id INT NOT NULL,
    curso_id INT NOT NULL,
    habilidad ENUM('speaking', 'writing', 'reading', 'listening', 'grammar', 'vocabulary') NOT NULL,
    puntaje DECIMAL(4,2) NOT NULL,
    fecha_evaluacion DATE NOT NULL,
    comentario TEXT,
    tipo_evaluacion ENUM('examen', 'tarea', 'proyecto', 'participacion') DEFAULT 'examen',
    periodo ENUM('Q1', 'Q2', 'Q3', 'Q4') NOT NULL,
    fecha_registro TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (estudiante_id) REFERENCES Usuarios(id),
    FOREIGN KEY (curso_id) REFERENCES Cursos(id),
    CHECK (puntaje >= 0 AND puntaje <= 20),
    UNIQUE KEY unique_evaluacion (estudiante_id, curso_id, habilidad, fecha_evaluacion)
);

-- =============================================
-- TABLA: Inscripciones (Relaci√≥n muchos a muchos)
-- =============================================
CREATE TABLE Inscripciones (
    id INT AUTO_INCREMENT PRIMARY KEY,
    estudiante_id INT NOT NULL,
    curso_id INT NOT NULL,
    fecha_inscripcion TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    estado ENUM('activo', 'completado', 'cancelado') DEFAULT 'activo',
    FOREIGN KEY (estudiante_id) REFERENCES Usuarios(id),
    FOREIGN KEY (curso_id) REFERENCES Cursos(id),
    UNIQUE KEY unique_inscripcion (estudiante_id, curso_id)
);
      </code></pre>
    </div>

    <button class="acordeon">Datos de Ejemplo y Poblaci√≥n</button>
    <div class="panel">
      <h3>Inserci√≥n de Datos de Prueba</h3>
      <p>Script para poblar la base de datos con datos realistas de prueba:</p>
      
      <pre><code>
-- =============================================
-- INSERCI√ìN DE DATOS DE EJEMPLO
-- =============================================

-- 1. INSERTAR USUARIOS
INSERT INTO Usuarios (ingresoUsuario, ingresoContrasenia, rol, nombre, email, telefono, fecha_nacimiento) VALUES
('admin', 'admin123', 'admin', 'Mar√≠a Gonz√°lez', 'maria.gonzalez@instituto.edu', '+1234567890', '1980-05-15'),
('sistema', 'sistema456', 'admin', 'Carlos Rodr√≠guez', 'carlos.rodriguez@instituto.edu', '+1234567891', '1975-08-22'),
('profe_ana', 'profe123', 'profesor', 'Ana Mart√≠nez', 'ana.martinez@instituto.edu', '+1234567892', '1985-03-10'),
('profe_luis', 'profe456', 'profesor', 'Luis Fern√°ndez', 'luis.fernandez@instituto.edu', '+1234567893', '1978-11-30'),
('profe_sofia', 'profe789', 'profesor', 'Sofia Ram√≠rez', 'sofia.ramirez@instituto.edu', '+1234567894', '1990-07-25'),
('est_juan', 'est123', 'estudiante', 'Juan P√©rez', 'juan.perez@estudiante.edu', '+1234567895', '2000-01-20'),
('est_maria', 'est456', 'estudiante', 'Mar√≠a L√≥pez', 'maria.lopez@estudiante.edu', '+1234567896', '2001-03-15'),
('est_carlos', 'est789', 'estudiante', 'Carlos S√°nchez', 'carlos.sanchez@estudiante.edu', '+1234567897', '1999-08-10'),
('est_laura', 'est012', 'estudiante', 'Laura Garc√≠a', 'laura.garcia@estudiante.edu', '+1234567898', '2000-12-05'),
('est_pedro', 'est345', 'estudiante', 'Pedro Mart√≠nez', 'pedro.martinez@estudiante.edu', '+1234567899', '2001-06-18'),
('est_ana', 'est678', 'estudiante', 'Ana Rodr√≠guez', 'ana.rodriguez@estudiante.edu', '+1234567800', '2000-09-22');

-- 2. INSERTAR CURSOS
INSERT INTO Cursos (nombre_curso, nivel, descripcion, profesor_id, max_estudiantes, fecha_inicio, fecha_fin) VALUES
('Ingl√©s B√°sico I', 'A1', 'Curso introductorio de ingl√©s para principiantes.', 3, 15, '2024-01-15', '2024-06-15'),
('Ingl√©s Intermedio', 'B1', 'Desarrollo de habilidades comunicativas intermedias.', 3, 12, '2024-01-15', '2024-06-15'),
('Conversaci√≥n Avanzada', 'C1', 'Perfeccionamiento del speaking y listening.', 4, 10, '2024-02-01', '2024-07-01'),
('Writing Acad√©mico', 'B2', 'Desarrollo de habilidades de escritura formal.', 4, 8, '2024-02-01', '2024-07-01'),
('Preparaci√≥n TOEFL', 'C1', 'Curso intensivo de preparaci√≥n para el examen TOEFL.', 5, 6, '2024-03-01', '2024-08-01');

-- 3. INSERTAR INSCRIPCIONES
INSERT INTO Inscripciones (estudiante_id, curso_id) VALUES
(6, 1), (7, 1), (8, 1), (9, 1),  -- Ingl√©s B√°sico I
(7, 2), (8, 2), (10, 2),         -- Ingl√©s Intermedio
(9, 3), (10, 3), (11, 3);        -- Conversaci√≥n Avanzada

-- 4. INSERTAR CALIFICACIONES
INSERT INTO Calificaciones (estudiante_id, curso_id, habilidad, puntaje, fecha_evaluacion, periodo) VALUES
(6, 1, 'speaking', 14.5, '2024-01-20', 'Q1'),
(6, 1, 'writing', 13.0, '2024-01-25', 'Q1'),
(7, 1, 'speaking', 16.5, '2024-01-20', 'Q1'),
(7, 1, 'writing', 15.0, '2024-01-25', 'Q1'),
(8, 2, 'speaking', 17.0, '2024-01-22', 'Q1'),
(8, 2, 'writing', 16.5, '2024-01-27', 'Q1');
      </code></pre>
    </div>

    <button class="acordeon">Consultas y Reportes Avanzados</button>
    <div class="panel">
      <h3>Consultas SQL para Gesti√≥n del Sistema</h3>
      <p>Consultas √∫tiles para extraer informaci√≥n y generar reportes:</p>
      
      <pre><code>
-- =============================================
-- CONSULTAS DE VERIFICACI√ìN Y REPORTES
-- =============================================

-- 1. Verificar usuarios por rol
SELECT rol, COUNT(*) as total FROM Usuarios GROUP BY rol;

-- 2. Cursos y sus profesores
SELECT c.nombre_curso, c.nivel, u.nombre as profesor 
FROM Cursos c 
JOIN Usuarios u ON c.profesor_id = u.id;

-- 3. Estudiantes inscritos por curso
SELECT c.nombre_curso, COUNT(i.estudiante_id) as total_estudiantes
FROM Cursos c 
LEFT JOIN Inscripciones i ON c.id = i.curso_id 
GROUP BY c.nombre_curso;

-- 4. Promedio de calificaciones por estudiante
SELECT u.nombre as estudiante, c.nombre_curso, AVG(cal.puntaje) as promedio
FROM Calificaciones cal
JOIN Usuarios u ON cal.estudiante_id = u.id
JOIN Cursos c ON cal.curso_id = c.id
GROUP BY u.nombre, c.nombre_curso
ORDER BY promedio DESC;

-- 5. Progreso por habilidad
SELECT u.nombre, cal.habilidad, AVG(cal.puntaje) as promedio, COUNT(*) as evaluaciones
FROM Calificaciones cal
JOIN Usuarios u ON cal.estudiante_id = u.id
WHERE u.rol = 'estudiante'
GROUP BY u.nombre, cal.habilidad
ORDER BY u.nombre, promedio DESC;

-- 6. Estudiantes activos por curso
SELECT c.nombre_curso, u.nombre as estudiante, i.fecha_inscripcion
FROM Inscripciones i
JOIN Cursos c ON i.curso_id = c.id
JOIN Usuarios u ON i.estudiante_id = u.id
WHERE i.estado = 'activo'
ORDER BY c.nombre_curso, u.nombre;
      </code></pre>
    </div>

    <button class="acordeon">Especificaciones T√©cnicas y Caracter√≠sticas</button>
    <div class="panel">
      <h3>Caracter√≠sticas de la Base de Datos</h3>
      
      <div class="tabla-info">
        <h5>üìã Tabla Usuarios</h5>
        <ul>
          <li><strong>Prop√≥sito:</strong> Gestionar todos los usuarios del sistema</li>
          <li><strong>Campos clave:</strong> ingresoUsuario (√∫nico), rol, email (√∫nico)</li>
          <li><strong>Seguridad:</strong> Contrase√±as encriptadas, control de estado activo</li>
          <li><strong>Auditor√≠a:</strong> fecha_registro autom√°tica</li>
        </ul>
      </div>

      <div class="tabla-info">
        <h5>üìö Tabla Cursos</h5>
        <ul>
          <li><strong>Prop√≥sito:</strong> Gestionar la oferta acad√©mica</li>
          <li><strong>Niveles:</strong> A1, A2, B1, B2, C1, C2 (Marco Europeo)</li>
          <li><strong>Control:</strong> L√≠mite de estudiantes, fechas de duraci√≥n</li>
          <li><strong>Relaci√≥n:</strong> Profesor asignado (clave for√°nea)</li>
        </ul>
      </div>

      <div class="tabla-info">
        <h5>üìä Tabla Calificaciones</h5>
        <ul>
          <li><strong>Prop√≥sito:</strong> Registrar evaluaciones detalladas</li>
          <li><strong>Habilidades:</strong> 6 tipos diferentes (speaking, writing, etc.)</li>
          <li><strong>Validaciones:</strong> Puntaje 0-20, evaluaciones √∫nicas por fecha</li>
          <li><strong>Periodos:</strong> Sistema de cuatrimestres (Q1-Q4)</li>
        </ul>
      </div>

      <div class="tabla-info">
        <h5>üîó Tabla Inscripciones</h5>
        <ul>
          <li><strong>Prop√≥sito:</strong> Relacionar estudiantes con cursos</li>
          <li><strong>Restricci√≥n:</strong> Inscripci√≥n √∫nica por estudiante-curso</li>
          <li><strong>Estados:</strong> activo, completado, cancelado</li>
          <li><strong>Auditor√≠a:</strong> Fecha autom√°tica de inscripci√≥n</li>
        </ul>
      </div>

      <h4>‚úÖ Caracter√≠sticas de Seguridad</h4>
      <ul>
        <li><strong>Integridad Referencial:</strong> Claves for√°neas con restricciones</li>
        <li><strong>Unicidad:</strong> Campos √∫nicos para evitar duplicados</li>
        <li><strong>Validaciones:</strong> CHECK constraints para valores v√°lidos</li>
        <li><strong>√çndices:</strong> Optimizaci√≥n para consultas frecuentes</li>
      </ul>

      <h4>üöÄ Optimizaciones Implementadas</h4>
      <ul>
        <li><strong>√çndices √önicos:</strong> Para b√∫squedas r√°pidas de usuarios y cursos</li>
        <li><strong>Claves For√°neas:</strong> Mantienen la integridad de los datos</li>
        <li><strong>Tipos de Datos Adecuados:</strong> ENUM para campos con opciones limitadas</li>
        <li><strong>Valores por Defecto:</strong> Simplifican las inserciones</li>
      </ul>
    </div>

    <!-- Bot√≥n de regresar -->
    <a href="../tareas.html" class="btn btn-regresar">
      <i class="fas fa-arrow-left"></i> Regresar a Tareas
    </a>
    
  </main>

  <script>
    // Script para acorde√≥n
    const acordeones = document.querySelectorAll('.acordeon');
    acordeones.forEach(btn => {
      btn.addEventListener('click', () => {
        btn.classList.toggle('active');
        const panel = btn.nextElementSibling;
        if (panel.style.maxHeight) {
          panel.style.maxHeight = null;
          btn.textContent = btn.textContent.replace('Ocultar', 'Ver');
        } else {
          panel.style.maxHeight = panel.scrollHeight + 'px';
          btn.textContent = btn.textContent.replace('Ver', 'Ocultar');
        }
      });
    });
  </script>
</body>
</html>